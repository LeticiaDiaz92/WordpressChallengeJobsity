function initMovieFilters(){const e=jQuery,t=e(".filters-form"),o=e(".filter-submit");function n(){t.find("input, select").filter((function(){return""!==e(this).val()})).length>0?o.removeClass("disabled"):o.addClass("disabled")}t.on("change","select",(function(){})),t.on("submit",(function(n){o.prop("disabled",!0).text("Filtering..."),t.find("input, select").each((function(){""===e(this).val()&&e(this).prop("disabled",!0)}))})),e(".filter-reset").on("click",(function(o){o.preventDefault(),t[0].reset(),window.location.href=e(this).attr("href")})),n(),t.on("input change","input, select",n)}function initScrollToTop(){const e=jQuery;e(".scroll-to-top").length||e("body").append('<button class="scroll-to-top" title="Back to top">â†‘</button>');const t=e(".scroll-to-top");e(window).on("scroll",(function(){e(window).scrollTop()>300?t.addClass("visible"):t.removeClass("visible")})),t.on("click",(function(){e("html, body").animate({scrollTop:0},300)}))}function initMobileMenu(){const e=jQuery;e(".mobile-menu-toggle").on("click",(function(){e(this).toggleClass("active"),e(".main-navigation").toggleClass("mobile-open")})),e(document).on("click",(function(t){e(t.target).closest(".main-navigation, .mobile-menu-toggle").length||(e(".mobile-menu-toggle").removeClass("active"),e(".main-navigation").removeClass("mobile-open"))}))}function initSmoothScrolling(){$('a[href^="#"]').on("click",(function(e){const t=$(this.getAttribute("href"));t.length&&(e.preventDefault(),$("html, body").animate({scrollTop:t.offset().top-100},800))}))}function initImageLazyLoading(){if("IntersectionObserver"in window){const e=new IntersectionObserver(((t,o)=>{t.forEach((t=>{if(t.isIntersecting){const o=t.target;o.src=o.dataset.src,o.classList.remove("lazy"),e.unobserve(o)}}))}));document.querySelectorAll("img[data-src]").forEach((t=>{e.observe(t)}))}}function initTooltips(){$("[data-tooltip]").hover((function(){const e=$('<div class="tooltip"></div>').text($(this).data("tooltip"));$("body").append(e);const t=$(this).offset();e.css({top:t.top-e.outerHeight()-10,left:t.left+$(this).outerWidth()/2-e.outerWidth()/2}).fadeIn()}),(function(){$(".tooltip").remove()}))}function debounce(e,t,o){let n;return function(){const i=this,r=arguments,s=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(i,r)}),t),s&&e.apply(i,r)}}jQuery(document).ready((function(e){e(".movies-filters").length&&initMovieFilters(),initScrollToTop(),initMobileMenu()})),window.MoviesTheme={debounce:debounce},jQuery(document).ready((function(e){"use strict";if(!e(".filters-container").length)return;({$form:e(".filters-form"),$resultsContainer:e("#movies-archive-container"),$loadingOverlay:null,currentXHR:null,searchTimeout:null,currentPage:1,init:function(){this.createLoadingOverlay(),this.bindEvents(),this.loadFromURL()},createLoadingOverlay:function(){this.$loadingOverlay=e('\n        <div class="loading-overlay">\n          <div class="loading-spinner">\n            <div class="spinner"></div>\n            <p>Loading movies...</p>\n          </div>\n        </div>\n      '),this.$resultsContainer.append(this.$loadingOverlay)},bindEvents:function(){const t=this;this.$form.find('input[name="movie_search"]').on("input",(function(){clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout((function(){t.currentPage=1,t.performSearch()}),500)})),this.$form.find("select").on("change",(function(){t.currentPage=1,t.performSearch()})),e(document).on("click",".pagination-wrapper a",(function(o){o.preventDefault();let n=1;const i=e(this).attr("href");if(i){const e=new URL(i,window.location.origin).searchParams.get("paged");n=parseInt(e)||1}if(e(this).hasClass("prev"))n=Math.max(1,t.currentPage-1);else if(e(this).hasClass("next"))n=t.currentPage+1;else if(1===n&&i){const t=e(this).text().trim(),o=parseInt(t);!isNaN(o)&&o>0&&(n=o)}t.currentPage=n,t.performSearch(),t.$resultsContainer.length&&t.$resultsContainer.offset()&&e("html, body").animate({scrollTop:t.$resultsContainer.offset().top-100},300)}))},performSearch:function(){const t=this;this.currentXHR&&4!==this.currentXHR.readyState&&this.currentXHR.abort(),this.showLoading(),this.$form.find("input, select").prop("disabled",!0);const o={action:"filter_movies",nonce:movies_ajax.nonce,movie_search:this.$form.find('input[name="movie_search"]').val(),movie_year:this.$form.find('select[name="movie_year"]').val(),movie_genre:this.$form.find('select[name="movie_genre"]').val(),orderby:this.$form.find('select[name="orderby"]').val(),paged:this.currentPage};this.currentXHR=e.ajax({url:movies_ajax.ajax_url,type:"POST",data:o,timeout:1e4,success:function(e){e.success?(t.updateResults(e),t.updateURL(o),t.updateResultsCount(e.found_posts,o)):t.showError("Failed to load movies. Please try again.")},error:function(e,o,n){"abort"!==o&&(console.error("AJAX Error:",n),t.showError("Connection error. Please check your internet connection and try again."))},complete:function(){t.hideLoading(),t.enableForm()}})},updateResults:function(t){const o=e("#movies-results-container");o.html(t.html),t.pagination&&o.append(t.pagination),e("#movies-grid").hide().fadeIn(400)},updateResultsCount:function(t,o){const n=[];let i;o.movie_search&&n.push("Title"),o.movie_year&&n.push("Year"),o.movie_genre&&n.push("Genre"),i=n.length>0?1===t?`Found ${t} movie matching filters: ${n.join(", ")}`:`Found ${t} movies matching filters: ${n.join(", ")}`:1===t?`Showing ${t} movie`:`Showing ${t} movies`,e(".results-count").text(i)},updateURL:function(e){const t=new URL(window.location),o=t.searchParams;o.delete("movie_search"),o.delete("movie_year"),o.delete("movie_genre"),o.delete("orderby"),o.delete("paged"),e.movie_search&&o.set("movie_search",e.movie_search),e.movie_year&&o.set("movie_year",e.movie_year),e.movie_genre&&o.set("movie_genre",e.movie_genre),e.orderby&&"title"!==e.orderby&&o.set("orderby",e.orderby),e.paged>1&&o.set("paged",e.paged),window.history.replaceState({},"",t.toString())},loadFromURL:function(){const e=new URL(window.location).searchParams;e.get("movie_search")&&this.$form.find('input[name="movie_search"]').val(e.get("movie_search")),e.get("movie_year")&&this.$form.find('select[name="movie_year"]').val(e.get("movie_year")),e.get("movie_genre")&&this.$form.find('select[name="movie_genre"]').val(e.get("movie_genre")),e.get("orderby")&&this.$form.find('select[name="orderby"]').val(e.get("orderby")),e.get("paged")&&(this.currentPage=parseInt(e.get("paged"))),(e.get("movie_search")||e.get("movie_year")||e.get("movie_genre")||e.get("orderby")||e.get("paged"))&&this.performSearch()},showLoading:function(){this.$loadingOverlay.addClass("visible"),e("#movies-grid").addClass("loading")},hideLoading:function(){this.$loadingOverlay.removeClass("visible"),e("#movies-grid").removeClass("loading")},enableForm:function(){this.$form.find("input, select").prop("disabled",!1)},showError:function(t){const o=e(`\n        <div class="error-message">\n          <p>${t}</p>\n          <button class="retry-btn">Try Again</button>\n        </div>\n      `);e("#movies-grid").parent().html(o),o.find(".retry-btn").on("click",(()=>{this.performSearch()}))}}).init()})),jQuery(document).ready((function(e){"use strict";if(!e(".actors-filters").length)return;({$form:e(".filters-form"),$resultsContainer:e("#actors-archive-container"),$loadingOverlay:null,currentXHR:null,searchTimeout:null,currentPage:1,init:function(){this.createLoadingOverlay(),this.bindEvents(),this.loadFromURL()},createLoadingOverlay:function(){this.$loadingOverlay=e('\n        <div class="loading-overlay">\n          <div class="loading-spinner">\n            <div class="spinner"></div>\n            <p>Loading actors...</p>\n          </div>\n        </div>\n      '),this.$resultsContainer.append(this.$loadingOverlay)},bindEvents:function(){const t=this;this.$form.find('input[name="actor_search"]').on("input",(function(){clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout((function(){t.currentPage=1,t.performSearch()}),500)})),this.$form.find("select").on("change",(function(){t.currentPage=1,t.performSearch()})),e(document).on("click",".pagination-wrapper a",(function(o){o.preventDefault();let n=1;const i=e(this).attr("href");if(i){const e=new URL(i,window.location.origin).searchParams.get("paged");n=parseInt(e)||1}if(e(this).hasClass("prev"))n=Math.max(1,t.currentPage-1);else if(e(this).hasClass("next"))n=t.currentPage+1;else if(1===n&&i){const t=e(this).text().trim(),o=parseInt(t);!isNaN(o)&&o>0&&(n=o)}t.currentPage=n,t.performSearch(),t.$resultsContainer.length&&t.$resultsContainer.offset()&&e("html, body").animate({scrollTop:t.$resultsContainer.offset().top-100},300)}))},performSearch:function(){const t=this,o=this.$form.find('input[name="actor_search"]').val().trim(),n=this.$form.find('select[name="actor_movie"]').val(),i=this.$form.find('select[name="orderby"]').val();if(!o&&!n&&"title"===i&&1===this.currentPage)return void(window.location.href=window.location.pathname);this.currentXHR&&4!==this.currentXHR.readyState&&this.currentXHR.abort(),this.showLoading(),this.$form.find("input, select").prop("disabled",!0);const r={action:"filter_actors",nonce:actorsAjax.nonce,actor_search:o,actor_movie:n,orderby:i,paged:this.currentPage};this.currentXHR=e.ajax({url:actorsAjax.ajaxUrl,type:"POST",data:r,timeout:1e4,success:function(e){e.success?(t.updateResults(e),t.updateURL(r),t.updateResultsCount(e.found_posts,r)):t.showError("Failed to load actors. Please try again.")},error:function(e,o,n){"abort"!==o&&(console.error("AJAX Error:",n,e.responseText),t.showError("Connection error. Please check your internet connection and try again."))},complete:function(){t.hideLoading(),t.enableForm()}})},updateResults:function(t){const o=e("#actors-results-container");o.html(t.html),t.pagination&&o.append(t.pagination),e("#actors-grid").hide().fadeIn(400)},updateResultsCount:function(t,o){const n=[];let i;o.actor_search&&n.push("Name"),o.actor_movie&&n.push("Movie"),i=n.length>0?1===t?`Found ${t} actor matching filters: ${n.join(", ")}`:`Found ${t} actors matching filters: ${n.join(", ")}`:1===t?`Showing ${t} actor`:`Showing ${t} actors`,e(".results-count").text(i)},updateURL:function(e){const t=new URL(window.location),o=t.searchParams;o.delete("actor_search"),o.delete("actor_movie"),o.delete("orderby"),o.delete("paged"),e.actor_search&&o.set("actor_search",e.actor_search),e.actor_movie&&o.set("actor_movie",e.actor_movie),e.orderby&&"title"!==e.orderby&&o.set("orderby",e.orderby),e.paged>1&&o.set("paged",e.paged),window.history.replaceState({},"",t.toString())},loadFromURL:function(){const e=new URL(window.location).searchParams;e.get("actor_search")&&this.$form.find('input[name="actor_search"]').val(e.get("actor_search")),e.get("actor_movie")&&this.$form.find('select[name="actor_movie"]').val(e.get("actor_movie")),e.get("orderby")&&this.$form.find('select[name="orderby"]').val(e.get("orderby")),e.get("paged")&&(this.currentPage=parseInt(e.get("paged")));(e.get("actor_search")&&""!==e.get("actor_search").trim()||e.get("actor_movie")&&""!==e.get("actor_movie")||e.get("orderby")&&"title"!==e.get("orderby")||e.get("paged")&&parseInt(e.get("paged"))>1)&&this.performSearch()},showLoading:function(){this.$loadingOverlay.addClass("visible"),e("#actors-grid").addClass("loading")},hideLoading:function(){this.$loadingOverlay.removeClass("visible"),e("#actors-grid").removeClass("loading")},enableForm:function(){this.$form.find("input, select").prop("disabled",!1)},showError:function(t){const o=e(`\n        <div class="error-message">\n          <p>${t}</p>\n          <button class="retry-btn">Try Again</button>\n        </div>\n      `);e("#actors-grid").parent().html(o),o.find(".retry-btn").on("click",(()=>{this.performSearch()}))}}).init()})),function(e){"use strict";function t(t,o){const n=e('<div class="notification notification-'+o+'">'+t+"</div>");e("body").append(n),setTimeout((function(){n.addClass("show")}),100),setTimeout((function(){n.removeClass("show"),setTimeout((function(){n.remove()}),300)}),3e3)}e(document).ready((function(){e(document).on("click",".wishlist-btn",(function(o){o.preventDefault();const n=e(this),i=n.data("movie-id"),r=n.hasClass("in-wishlist");n.hasClass("loading")||(n.addClass("loading"),e.ajax({url:movies_ajax.ajax_url,type:"POST",data:{action:r?"remove_from_wishlist":"add_to_wishlist",nonce:movies_ajax.nonce,movie_id:i},success:function(o){o.success?(n.toggleClass("in-wishlist"),n.text(r?"Add to Wishlist":"Remove from Wishlist"),void 0!==o.data.count&&e(".wishlist-count").text(o.data.count),t(o.data.message,"success")):t(o.data.message||"An error occurred","error")},error:function(){t("Network error occurred","error")},complete:function(){n.removeClass("loading")}}))}))}))}(jQuery),function(e){"use strict";e(document).ready((function(){!function(){const t=e(".search-field"),o=e(".search-results");let n;t.on("input",(function(){const t=e(this).val().trim();clearTimeout(n),t.length<3?o.hide():n=setTimeout((function(){!function(t){const o=e(".search-results");e.ajax({url:movies_ajax.ajax_url,type:"POST",data:{action:"live_search",nonce:movies_ajax.nonce,query:t},beforeSend:function(){o.html('<div class="search-loading">Searching...</div>').show()},success:function(e){if(e.success)if(e.data.results.length>0){let t='<div class="search-results-list">';e.data.results.forEach((function(e){t+='<div class="search-result-item">',t+='<a href="'+e.url+'">',e.thumbnail&&(t+='<img src="'+e.thumbnail+'" alt="'+e.title+'">'),t+='<div class="search-result-content">',t+="<h4>"+e.title+"</h4>",t+='<span class="search-result-type">'+e.type+"</span>",t+="</div>",t+="</a>",t+="</div>"})),t+="</div>",o.html(t)}else o.html('<div class="search-no-results">No results found</div>');else o.html('<div class="search-error">Search error occurred</div>')},error:function(){o.html('<div class="search-error">Network error occurred</div>')}})}(t)}),300)})),e(document).on("click",(function(t){e(t.target).closest(".search-form").length||o.hide()}))}()}))}(jQuery);